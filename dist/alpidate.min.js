(()=>{function b(e,i){let r={$invalid:!1};return i.forEach(a=>{let[o,n]=a.split(":"),t=!1;switch(o){case"required":t=e===null||e===""||e===void 0||Array.isArray(e)&&e.length===0;break;case"array":t=!Array.isArray(e);break;case"min":(typeof e=="string"||Array.isArray(e))&&(t=e.length<Number(n));break;case"max":(typeof e=="string"||Array.isArray(e))&&(t=e.length>Number(n));break;case"numeric":t=isNaN(e);break;case"email":t=!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e);break;case"regex":try{let f=n?new RegExp(n):null;t=f?!f.test(e):!0}catch{t=!0}break}r[o]=t,t&&(r.$invalid=!0)}),r}function m(e){let i={};for(let r in e.validations)if(r.includes("*")){let o=r.split(".")[0];(e[o]||[]).forEach((t,f)=>{let l=r.replace("*",f);i[l]=e.validations[r]})}else i[r]=e.validations[r];return i}function y(e){let i=m(e);for(let r in i)e.validate(r),e.$watch(r,()=>e.validate(r));return e}function x(e){e.magic("validation",()=>i=>{i.$v={},i.$v.$touch=!1,i.$v.$invalid=!0,i.validate=(r=null)=>{let a=m(i),o=r?[r]:Object.keys(a);r||(i.$v.$touch=!0),o.forEach(n=>{let t=a[n],f=n.split("."),l=i.$v,u=i;f.forEach((s,c)=>{if(!isNaN(Number(s))){u=u[s];return}l[s]||(l[s]={$invalid:!1}),l=l[s],u=u[s]??u[s]}),Object.assign(l,b(u,t)),Array.isArray(u)&&Object.keys(i.validations).find(c=>c.includes("*")&&c.startsWith(f[0]))&&(l.each=u.map((c,d)=>{let h={};return Object.keys(i.validations).filter($=>$.startsWith(f[0]+".*")).map($=>({fieldName:$.split(".").slice(-1)[0],rules:i.validations[$]})).forEach($=>{h[$.fieldName]=b(c[$.fieldName],$.rules)}),h}),l.$invalid=l.each.some(c=>Object.values(c).some(d=>d.$invalid)));let p=n.split(".");if(p.length>1){let s=i.$v;for(let c=0;c<p.length-1;c++){let d=p[c];if(!s[d])continue;let h=s[d];h.$invalid=Object.values(h).filter(v=>typeof v=="object"&&v!==null).some(v=>v.$invalid),s=h}}})},i.$v.reset=()=>i.$v.$touch=!1,i=y(i),i.$watch("$v",()=>{i.$v.$invalid=Object.keys(i.$v).some(r=>{if(r.startsWith("$"))return!1;let a=i.$v[r];return a.$invalid?!0:a.each?a.each.some(o=>Object.values(o).some(n=>n.$invalid)):!1})})})}})();
