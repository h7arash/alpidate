(()=>{function b(e,r){let i={$invalid:!1};return r.forEach(c=>{let[a,t]=c.split(":"),s=!1;switch(a){case"required":s=e===null||e===""||e===void 0||Array.isArray(e)&&e.length===0;break;case"array":s=!Array.isArray(e);break;case"min":(typeof e=="string"||Array.isArray(e))&&(s=e.length<Number(t));break;case"max":(typeof e=="string"||Array.isArray(e))&&(s=e.length>Number(t));break;case"numeric":s=isNaN(e);break;case"email":s=!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e);break;case"regex":try{let l=t?new RegExp(t):null;s=l?!l.test(e):!0}catch{s=!0}break}i[a]=s,s&&(i.$invalid=!0)}),i}function p(e){let r={};for(let i in e.validations)if(i.includes("*")){let a=i.split(".")[0];(e[a]||[]).forEach((s,l)=>{let n=i.replace("*",l);r[n]=e.validations[i]})}else r[i]=e.validations[i];return r}function v(e){let r=p(e);for(let i in r)e.$watch(i,()=>e.validate(i));return e}function x(e){e.magic("validation",()=>r=>{r.$v={},r.$v.$touch=!1,r.$v.$invalid=!0,r.validate=(i=null)=>{let c=p(r),a=i?[i]:Object.keys(c);i||(r.$v.$touch=!0),a.forEach(t=>{let s=c[t],l=t.split("."),n=r.$v,o=r;l.forEach((f,$)=>{if(!isNaN(Number(f))){o=o[f];return}n[f]||(n[f]={$invalid:!1}),n=n[f],o=o[f]??o[f]}),Object.assign(n,b(o,s)),Array.isArray(o)&&Object.keys(r.validations).find($=>$.includes("*")&&$.startsWith(l[0]))&&(n.each=o.map(($,d)=>{let h={};return Object.keys(r.validations).filter(u=>u.startsWith(l[0]+".*")).map(u=>({fieldName:u.split(".").slice(-1)[0],rules:r.validations[u]})).forEach(u=>{h[u.fieldName]=b($[u.fieldName],u.rules)}),h}),n.$invalid=n.each.some($=>Object.values($).some(d=>d.$invalid)))})},r.$v.reset=()=>r.$v.$touch=!1,r=v(r),r.$watch("$v",()=>{r.$v.$invalid=Object.keys(r.$v).some(i=>{if(i.startsWith("$"))return!1;let c=r.$v[i];return c.$invalid?!0:c.each?c.each.some(a=>Object.values(a).some(t=>t.$invalid)):!1})})})}})();
